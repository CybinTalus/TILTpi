
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
    	<title>Tilt Pi Setup</title>

<script src="mdl/material.js"></script>

<style>
		@import 'mdl/material.css';
</style>
<style>
.demo-card-wide.mdl-card {
  width: 512px;
  background-color: whitesmoke;
}
.demo-card-wide > .mdl-card__title {
  color: black;
  height: 250px;
  background: url('logo.png') center / cover;
  background-size: 150px 150px;
  background-repeat: no-repeat;
}
.demo-card-wide > .mdl-card__menu {
  color: #fff;
}
</style>
</head>

<body>
<div class="demo-card-wide mdl-card mdl-shadow--8dp">
  <div class="mdl-card__title">
    <h2 class="mdl-card__title-text">Tilt Pi Set Up</h2>
  </div>
  <p><center>Works with Firefox on PC and Safari or Chrome on Mac.</center></p>
 <center>
<h6>
SSID
</h6>
</center>
<center>
<div class="mdl-textfield mdl-js-textfield">
    <input class="mdl-textfield__input" type="text" id="wifi-val">     <label class="mdl-textfield__label" for="wifi-val">WiFi name</label>
    </div>
    </center>
<center><h6>
Password
</h6></center>
<center>
<div class="mdl-textfield mdl-js-textfield">
    <input class="mdl-textfield__input" type="text" id="wifi-pass">     
   <label class="mdl-textfield__label" for="wifi-pass">WiFi password</label>
    </div>
</center>
<div class="mdl-card__supporting-text">
Clicking the button below will create a new "wpa_supplicant.conf" configuration file. Make sure it is titled "wpa_supplicant.conf" and copy this file to your Tilt Pi SD card (called "boot").
</div>
<center><input type="button" id="dwn-btn" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" value="Create WiFi Configuration File"></center>
<div class="mdl-card__supporting-text">
</div>
<center>
<h6>
Email Address (GMAIL only)
</h6>
</center>
<center>
<div class="mdl-textfield mdl-js-textfield">
  <input class="mdl-textfield__input" type="text" id="email">     <label class="mdl-textfield__label" for="email">example@gmail.com</label>
  </div>
  </center>
<center><h6>
Beer Name (optional)
</h6></center>
<center>
<div class="mdl-textfield mdl-js-textfield">
  <input class="mdl-textfield__input" type="text" id="beername">     
 <label class="mdl-textfield__label" for="beername">West Coast IPA</label>
  </div>
</center>
<div class="mdl-card__supporting-text">
Clicking the button below will create a new "cloud_log.json" configuration file. Make sure it is titled "cloud_log.json" and copy this file to your Tilt Pi SD card (called "boot"). After connecting to WiFi, the Tilt Pi will send you an email with a link to your cloud data and Tilt Pi dashboard.
</div>
<center><input type="button" id="dwn-cloud-btn" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" value="Create Cloud Configuration File"></center>
<div class="mdl-card__supporting-text">
</div>
</div>
</body>
</html>

<script>
function download(filename, text) {
    var element = document.createElement('a');
    element.setAttribute('href', 'data:,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
}

// Start file download.
document.getElementById("dwn-btn").addEventListener("click", function(){
    // Generate download of wpa_supplicant.conf
    var text = 'ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\n' + 'update_config=1\n' + 'country=US\n' + 'network={\n' + '\tssid="'+ document.getElementById("wifi-val").value + '"\n' + '\tpsk="' + document.getElementById("wifi-pass").value + '"\n}';
    var filename = "wpa_supplicant.conf";
    download(filename, text);
    }, false);
    document.getElementById("dwn-cloud-btn").addEventListener("click", function(){
    // Generate download of cloud_log.json
    var text2 = '{"email":"' + document.getElementById("email").value + '",' + '"beer":"' + document.getElementById("beername").value + '"}';
    var filename2 = "cloud_log.json";
    download(filename2, text2);
    }, false);
</script>
